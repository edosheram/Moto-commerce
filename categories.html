<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MotoPro</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Racing+Sans+One&display=swap"
    />
    <style>
      /* Basic Reset */
      body,
      h1,
      h2,
      h3,
      p,
      ul,
      li,
      form,
      input,
      button {
        margin: 0;
        padding: 0;
        border: 0;
        font-size: 100%;
        font: inherit;
        vertical-align: baseline;
        box-sizing: border-box;
      }

      body {
        font-family: sans-serif;
        line-height: 1.6;
        background-color: #f4f4f4;
        color: #333;
      }

      /* Header */
      .top-header {
        background-color: #f8f8f8;
        padding: 0.75rem 1rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-size: 1.5rem;
        font-weight: bold;
        font-family: "Racing Sans One", sans-serif;
      }
      .logo img {
        width: 32px;
        height: 32px;
      }

      .search-bar {
        flex-grow: 1;
        margin: 0 0.75rem;
      }

      .search-bar input[type="text"] {
        width: 100%;
        padding: 0.35rem;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 0.9rem;
      }

      .header-icons {
        display: flex;
        gap: 0.25rem;
      }

      .header-icons a {
        color: #333;
        text-decoration: none;
        display: flex;
        align-items: center;
        cursor: pointer;
        position: relative; /* For the badge */
      }

      .material-symbols-outlined {
        font-size: 1.25rem;
      }

      .cart-badge {
        position: absolute;
        top: -0.5rem;
        right: -0.5rem;
        background-color: #ff6f00;
        color: white;
        border-radius: 50%;
        padding: 0.2rem 0.4rem;
        font-size: 0.6rem;
      }

      /* Navigation Bar */
      .navigation {
        background-color: #fff;
        padding: 0.5rem 0;
        overflow-x: auto;
        border-top: 2px solid #ccc;
        border-bottom: 2px solid #ccc;
      }

      .nav-links ul {
        list-style: none;
        padding: 0 1rem;
        display: flex;
        justify-content: flex-start;
        gap: 1rem;
        white-space: nowrap;
        font-size: 1rem;
        font-family: "Racing Sans One", sans-serif;
      }

      .nav-links li a {
        text-decoration: none;
        color: #333;
        padding: 0.5rem 0;
      }

      .nav-links li a.active {
        font-weight: bold;
        color: #ff6f00;
      }

      /* Content Title */
      .content-title {
        padding: 2rem;
        text-align: left;
        font-size: 1.1rem;
        color: #555;
        border-bottom: 1px solid #eee;
        margin-bottom: 0.75rem;
        font-family: "Racing Sans One", sans-serif;
        text-transform: uppercase;
      }

      /* Product Grid */
      .product-grid {
        display: grid;
        grid-template-columns: repeat(
          auto-fill,
          minmax(180px, 1fr)
        ); /* Adjust minmax for smaller screens */
        gap: 0.75rem;
        padding: 0.75rem;
      }

      .product-item {
        display: flex;
        flex-direction: column;
        background-color: #fff;
        padding: 0.75rem;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        text-align: center;
      }

      .product-item img {
        max-width: 100%;
        height: auto;
        margin-bottom: 0.5rem;
        border-radius: 4px;
      }

      .product-item h3 {
        font-size: 0.9rem;
        margin-bottom: 0.2rem;
        font-family: monospace; /* Monospaced font */
        letter-spacing: 0.05em; /* Optional: adjust letter spacing */
      }

      .product-item p {
        font-size: 0.75rem;
        color: #777;
        margin-bottom: 0.3rem;
      }

      .product-item .price {
        font-weight: bold;
        color: #ff6f00;
        font-size: 0.9rem;
        margin-bottom: 0.4rem;
      }

      .product-item .shipping {
        font-size: 0.7rem;
        color: #555;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.2rem;
        margin-bottom: 0.6rem;
      }

      .add-to-cart-btn {
        background-color: #777; /* Gray color */
        color: #fff; /* White text for contrast */
        padding: 0.6rem 1.2rem;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.8rem;
        width: 100%;
        margin-top: auto; /* Push to the bottom */
      }

      .add-to-cart-btn:hover {
        background-color: #555; /* Darker gray on hover */
      }

      /* Pagination */
      .pagination {
        display: flex;
        justify-content: center;
        margin-top: 1rem;
        padding: 0.5rem;
      }

      .pagination button {
        padding: 0.4rem 0.6rem;
        margin: 0 0.15rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.7rem;
      }

      .pagination button.active {
        background-color: #333;
        color: #fff;
      }

      .pagination button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      /* Footer */
      .footer {
        background-color: #222;
        color: #fff;
        padding: 0.75rem;
        text-align: center;
        font-size: 0.7rem;
      }

      .social-icons a {
        color: #fff;
        font-size: 1rem;
        margin: 0 0.4rem;
        text-decoration: none;
      }

      /* Modal Styles */
      .cart-modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
      }

      .cart-modal-content {
        background-color: #fefefe;
        margin: 15% auto; /* Adjusted top margin */
        padding: 15px;
        border: 1px solid #888;
        width: 85%; /* Could be more or less, depending on screen size */
        border-radius: 6px;
        position: relative;
      }

      .close-button {
        color: #aaa;
        float: right;
        font-size: 22px;
        font-weight: bold;
      }

      .close-button:hover,
      .close-button:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
      }

      #cart-items {
        list-style: none;
        padding: 0;
      }

      #cart-items li {
        padding: 6px 0;
        border-bottom: 1px solid #eee;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.8rem;
      }

      #cart-items li:last-child {
        border-bottom: none;
      }

      .cart-actions {
        margin-top: 15px;
        text-align: right;
      }

      .checkout-button {
        background-color: #008cba;
        color: white;
        padding: 10px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
      }

      .checkout-button:hover {
        background-color: #0077b3;
      }

      /* Media Query for larger screens (adjust as needed) */
      @media (min-width: 768px) {
        .top-header {
          padding: 1rem;
        }
        .logo img {
          width: 32px;
          height: 32px;
        }
        .logo {
          font-size: 1.75rem;
        }

        .search-bar input[type="text"] {
          padding: 0.5rem;
          font-size: 1rem;
        }

        .material-symbols-outlined {
          font-size: 1.5rem;
        }

        .navigation {
          padding: 0.75rem 0;
        }

        .nav-links ul {
          gap: 1.5rem;
          font-size: 1.1rem;
          padding: 0 2rem;
        }

        .content-title {
          font-size: 2rem;
          padding: 1.25rem 1rem;
          margin-bottom: 1rem;
        }

        .product-grid {
          grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
          gap: 1rem;
          padding: 1rem;
        }

        .product-item {
          padding: 1rem;
          border-radius: 10px;
        }

        .product-item img {
          margin-bottom: 0.75rem;
          border-radius: 6px;
        }

        .product-item h3 {
          font-size: 1rem;
          margin-bottom: 0.3rem;
        }

        .product-item p {
          font-size: 0.8rem;
          margin-bottom: 0.5rem;
        }

        .product-item .price {
          font-size: 1rem;
          margin-bottom: 0.6rem;
        }

        .product-item .shipping {
          font-size: 0.75rem;
          margin-bottom: 0.8rem;
        }

        .add-to-cart-btn {
          font-size: 0.9rem;
          padding: 0.75rem 1.5rem;
          border-radius: 8px;
        }

        .pagination {
          margin-top: 1.5rem;
          padding: 0.75rem;
        }

        .pagination button {
          padding: 0.5rem 0.8rem;
          margin: 0 0.2rem;
          font-size: 0.8rem;
          border-radius: 5px;
        }

        .footer {
          padding: 1rem;
          font-size: 0.8rem;
        }

        .social-icons a {
          font-size: 1.2rem;
          margin: 0 0.6rem;
        }

        .cart-modal-content {
          margin: 10% auto;
          width: 70%;
          border-radius: 8px;
          padding: 20px;
        }

        .close-button {
          font-size: 26px;
        }

        #cart-items li {
          font-size: 0.9rem;
          padding: 8px 0;
        }

        .checkout-button {
          font-size: 1rem;
          padding: 12px 20px;
          border-radius: 6px;
        }
      }
    </style>
  </head>
  <body>
    <header class="top-header">
      <div class="logo">
        <a href="homepage.html">
          <img src="images/logo.svg" alt="MotoPro Logo" />
        </a>
      </div>
      <div class="search-bar">
        <input type="text" placeholder="Search..." />
      </div>
      <div class="header-icons">
        <a id="cart-icon">
          <span class="material-symbols-outlined">shopping_cart</span>
          <span id="cart-count" class="cart-badge" style="display: none">0</span>
        </a>
        <a href="profile.html"><span class="material-symbols-outlined">person</span></a>
      </div>
    </header>

    <nav class="navigation">
      <div class="nav-links">
        <ul>
          <li><a href="#" data-category="helmets" class="active">Helmet</a></li>
          <li><a href="#" data-category="riding-gear">Riding Gear</a></li>
          <li><a href="#" data-category="parts">Parts</a></li>
          <li><a href="#" data-category="accessories">Accessories</a></li>
          <li><a href="#" data-category="tires">Tires</a></li>
        </ul>
      </div>
    </nav>

    <div class="content-title" id="contentTitle">FULL FACE MOTORCYCLE HELMETS</div>

    <section class="product-grid" id="productGrid"></section>

    <div class="pagination" id="pagination"></div>

    <footer class="footer">
      <div class="social-icons">
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-youtube"></i></a>
      </div>
      <p>&copy; 2025 MotoPro. All rights reserved.</p>
    </footer>

    <div id="cartModal" class="cart-modal">
      <div class="cart-modal-content">
        <span class="close-button">&times;</span>
        <h2>Shopping Cart</h2>
        <ul id="cart-items"></ul>
        <div class="cart-actions">
          <button class="checkout-button" onclick="goToCartPage()">Proceed to Checkout</button>
        </div>
      </div>
    </div>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script>
      const productGrid = document.getElementById("productGrid");
      const paginationContainer = document.getElementById("pagination");
      const contentTitle = document.getElementById("contentTitle");
      const navLinks = document.querySelectorAll(".nav-links a");
      const productsPerPage = 6;
      let currentPage = 1;
      let currentCategory = "helmets";
      let allProducts = {
        helmets: [
          {
            id: 1,
            name: "Arai Regent-X Helmet",
            image: "images/helmet1.jpg",
            price: "$594.00",
            shipping: "Free Shipping",
          },
          {
            id: 2,
            name: "Alpinestars Supertech R10 Carbon Helmet",
            image: "images/helmet2.jpg",
            price: "$594.00",
            shipping: "Free Shipping",
          },
          {
            id: 3,
            name: "Scorpion EXO-R1 Air Carbon Onyx Helmet",
            image: "images/helmet3.jpg",
            price: "$594.00",
            shipping: "Free Shipping",
          },
          {
            id: 4,
            name: "AGV K1 S HELMET",
            image: "images/helmet4.jpg",
            price: "$594.00",
            shipping: "Free Shipping",
          },
          {
            id: 5,
            name: "Another Helmet",
            image: "images/helmet5.jpg",
            price: "$450.00",
            shipping: "Free Shipping",
          },
          {
            id: 6,
            name: "Stylish Racing Helmet",
            image: "images/helmet6.jpg",
            price: "$620.00",
            shipping: "Free Shipping",
          },
          {
            id: 7,
            name: "Cool Blue Helmet",
            image: "helmet7.jpg",
            price: "$380.00",
            shipping: "Free Shipping",
          },
          {
            id: 8,
            name: "Adventure Touring Helmet",
            image: "helmet8.jpg",
            price: "$510.00",
            shipping: "Free Shipping",
          },
          {
            id: 9,
            name: "Retro Classic Helmet",
            image: "helmet9.jpg",
            price: "$420.00",
            shipping: "Free Shipping",
          },
          {
            id: 10,
            name: "Lightweight Sport Helmet",
            image: "helmet10.jpg",
            price: "$550.00",
            shipping: "Free Shipping",
          },
          {
            id: 11,
            name: "Durable Track Helmet",
            image: "helmet11.jpg",
            price: "$680.00",
            shipping: "Free Shipping",
          },
          {
            id: 12,
            name: "Urban Commuter Helmet",
            image: "helmet12.jpg",
            price: "$320.00",
            shipping: "Free Shipping",
          },
        ],
        "riding-gear": [
          {
            id: 13,
            name: "Alpinestars Tech-Air 5 System",
            image: "images/gear1.jpg",
            price: "$829.95",
            shipping: "Free Shipping",
          },
          {
            id: 14,
            name: "Klim Dakar Jacket",
            image: "images/gear2.jpg",
            price: "$389.99",
            shipping: "Free Shipping",
          },
          {
            id: 15,
            name: "Rev'it! Sand 4 Gloves",
            image: "images/globes.jpg",
            price: "$99.99",
            shipping: "Free Shipping",
          },
          {
            id: 16,
            name: "Sidi Adventure 2 Boots",
            image: "images/boots.jpg",
            price: "$399.99",
            shipping: "Free Shipping",
          },
          {
            id: 17,
            name: "Leatt Body Protector 3.0",
            image: "images/gear3.jpg",
            price: "$199.99",
            shipping: "Free Shipping",
          },
          {
            id: 18,
            name: "Fox Racing V1 Helmet",
            image: "images/helmet6.jpg",
            price: "$149.95",
            shipping: "Free Shipping",
          },
        ],
        parts: [
          {
            id: 19,
            name: "Brembo Front Brake Pads",
            image: "images/pads.jpg",
            price: "$79.99",
            shipping: "Standard Shipping",
          },
          {
            id: 20,
            name: "Akrapovič Slip-On Exhaust",
            image: "images/parts2.jpg",
            price: "$599.00",
            shipping: "Free Shipping",
          },
          {
            id: 21,
            name: "Öhlins Rear Shock Absorber",
            image: "images/parts3.jpg",
            price: "$879.99",
            shipping: "Free Shipping",
          },
          {
            id: 22,
            name: "DID Chain and Sprocket Kit",
            image: "images/parts4.jpg",
            price: "$149.95",
            shipping: "Standard Shipping",
          },
         
        ],
        accessories: [
          {
            id: 25,
            name: "Garmin Zumo XT GPS",
            image: "images/accessories1.jpg",
            price: "$549.99",
            shipping: "Free Shipping",
          },
          {
            id: 26,
            name: "Sena 50S Bluetooth Headset",
            image: "images/accessories2.jpg",
            price: "$299.95",
            shipping: "Free Shipping",
          },
          {
            id: 27,
            name: "Oxford Heated Grips",
            image: "images/accessories3.jpg",
            price: "$89.99",
            shipping: "Standard Shipping",
          },
          {
            id: 28,
            name: "SW-MOTECH Tank Bag",
            image: "images/accessories4.jpg",
            price: "$179.99",
            shipping: "Free Shipping",
          },
        
        ],
        tires: [
          {
            id: 31,
            name: "Michelin Pilot Road 5",
            image: "images/tires1.jpg",
            price: "$160.00",
            shipping: "Free Shipping",
          },
          {
            id: 32,
            name: "Pirelli Diablo Rosso IV",
            image: "images/tires2.jpg",
            price: "$175.00",
            shipping: "Free Shipping",
          },
          {
            id: 33,
            name: "Bridgestone Battlax S22",
            image: "images/tires3.jpg",
            price: "$155.00",
            shipping: "Free Shipping",
          },
          {
            id: 34,
            name: "Continental ContiRoadAttack 4",
            image: "images/tires4.jpg",
            price: "$165.00",
            shipping: "Free Shipping",
          },
          
        ],
      };

      let cart = localStorage.getItem("cart") ? JSON.parse(localStorage.getItem("cart")) : [];
      const cartModal = document.getElementById("cartModal");
      const cartItemsList = document.getElementById("cart-items");
      const closeButton = document.querySelector(".close-button");
      const cartIcon = document.getElementById("cart-icon");
      const cartCountElement = document.getElementById("cart-count");
      const checkoutButton = document.querySelector(".checkout-button"); // Get the checkout button

      function updateCartIcon() {
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        if (totalItems > 0) {
          cartCountElement.textContent = totalItems;
          cartCountElement.style.display = "block";
        } else {
          cartCountElement.style.display = "none";
        }
      }

      function displayProducts(products) {
        productGrid.innerHTML = "";
        products.forEach((product) => {
          const productCard = document.createElement("div");
          productCard.classList.add("product-item");
          productCard.innerHTML = `
                        <a href="product.html?id=${product.id}" style="text-decoration: none; color: inherit;">
                            <img src="${product.image}" alt="${product.name}">
                            <h3>${product.name}</h3>
                            <p class="price">${product.price}</p>
                            <p class="shipping">🚚 ${product.shipping}</p>
                        </a>
                        <button class="add-to-cart-btn" data-product-id="${product.id}" data-product-name="${product.name}" data-product-price="${product.price}">Add to Cart</button>
                    `;
          productGrid.appendChild(productCard);

          // Ensure button is always at the bottom
          const imgHeight = productCard.querySelector("img").offsetHeight;
          const textHeight =
            productCard.querySelector("h3").offsetHeight +
            productCard.querySelector(".price").offsetHeight +
            productCard.querySelector(".shipping").offsetHeight;
          const cardHeight = productCard.offsetHeight;
          const buttonHeight = productCard.querySelector(".add-to-cart-btn").offsetHeight;
          const remainingSpace =
            cardHeight -
            imgHeight -
            textHeight -
            buttonHeight -
            parseFloat(window.getComputedStyle(productCard).paddingTop) * 2 -
            parseFloat(window.getComputedStyle(productCard).paddingBottom) * 2;

          if (remainingSpace > 0) {
            productCard.style.paddingBottom = `${
              parseFloat(window.getComputedStyle(productCard).paddingBottom) + remainingSpace
            }px`;
          }
        });

        const addToCartButtons = document.querySelectorAll(".add-to-cart-btn");
        addToCartButtons.forEach((button) => {
          button.addEventListener("click", addToCart);
        });
      }
      function setupPagination(category) {
        paginationContainer.innerHTML = "";
        const totalPages = Math.ceil(allProducts[category].length / productsPerPage);

        if (totalPages > 1) {
          for (let i = 1; i <= totalPages; i++) {
            const pageButton = document.createElement("button");
            pageButton.textContent = i;
            pageButton.addEventListener("click", () => {
              currentPage = i;
              renderPage(category);
            });
            if (i === currentPage) {
              pageButton.classList.add("active");
            }
            paginationContainer.appendChild(pageButton);
          }
        }
      }

      function renderPage(category) {
        const startIndex = (currentPage - 1) * productsPerPage;
        const endIndex = startIndex + productsPerPage;
        const currentProducts = allProducts[category].slice(startIndex, endIndex);
        displayProducts(currentProducts);

        const buttons = paginationContainer.querySelectorAll("button");
        buttons.forEach((button) => {
          button.classList.remove("active");
          if (parseInt(button.textContent) === currentPage) {
            button.classList.add("active");
          }
        });
      }

      function loadCategory(category) {
        currentCategory = category;
        currentPage = 1;
        contentTitle.textContent = category.toUpperCase().replace("-", " ");
        renderPage(category);
        setupPagination(category);

        // Update active navigation link
        navLinks.forEach((link) => {
          link.classList.remove("active");
          if (link.dataset.category === category) {
            link.classList.add("active");
          }
        });
      }

      function addToCart(event) {
        const productId = parseInt(event.target.dataset.productId);
        const productName = event.target.dataset.productName;
        const productPrice = event.target.dataset.productPrice;
        const productImage = event.target
          .closest(".product-item")
          .querySelector("img")
          .getAttribute("src")
          .split("/")
          .pop();

        let cart = localStorage.getItem("cart") ? JSON.parse(localStorage.getItem("cart")) : [];
        const existingItem = cart.find((item) => item.id === productId);

        if (existingItem) {
          existingItem.quantity++;
        } else {
          cart.push({
            id: productId,
            name: productName,
            price: productPrice,
            image: productImage,
            quantity: 1,
          });
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartIcon(); // Call updateCartIcon here!
        updateCartModal();
      }

      function updateCartModal() {
        cartItemsList.innerHTML = "";
        let total = 0;
        cart.forEach((item) => {
          const listItem = document.createElement("li");
          listItem.innerHTML = `
                    <span>${item.name} x ${item.quantity}</span>
                    <span>${item.price}</span>
                `;
          cartItemsList.appendChild(listItem);
          total += parseFloat(item.price.replace("$", "")) * item.quantity;
        });
        // You might want to display the total in the modal as well
      }
      function openCartModal() {
        if (cart.length > 0) {
          cartModal.style.display = "block";
          updateCartModal(); // Ensure modal also reflects current cart
          updateCartIcon(); // Also update icon when modal opens (though addToCart should handle this)
        }
      }

      function closeCartModal() {
        cartModal.style.display = "none";
      }

      function goToCartPage() {
        window.location.href = "cart.html";
      }

      // Event listeners
      navLinks.forEach((link) => {
        link.addEventListener("click", function (event) {
          event.preventDefault();
          const category = this.dataset.category;
          loadCategory(category);
        });
      });

      closeButton.addEventListener("click", closeCartModal);
      cartIcon.addEventListener("click", openCartModal);

      window.addEventListener("click", function (event) {
        if (event.target === cartModal) {
          closeCartModal();
        }
      });

      // Add event listener for the "Proceed to Checkout" button
      checkoutButton.addEventListener("click", goToCartPage);

      // Initial load (default to helmets)
      loadCategory(currentCategory);
      updateCartIcon(); // Initialize cart icon
    </script>
  </body>
</html>
